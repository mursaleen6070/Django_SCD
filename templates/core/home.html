{% extends "partials/base.html" %}
{% load humanize static %}

{% block title %}HotelEase — Luxury Hotel Management{% endblock %}

{% block content %}
<section class="hero-gallery position-relative overflow-hidden" id="home">
    <div class="hero-overlay"></div>
    <div class="hero-intro container position-relative z-2">
        <div class="row justify-content-between align-items-center">
            <div class="col-lg-6">
                <span class="hero-kicker text-uppercase">Signature stays by HotelEase</span>
                <h1 class="display-4 fw-bold text-white">Where tailored luxury meets effortless hospitality</h1>
                <p class="lead text-white-50">Choose from purpose-built meeting rooms, refined suites, and elevated executive residences — each designed for unforgettable city escapes.</p>
                <div class="d-flex flex-wrap gap-3">
                    <a class="btn btn-gold btn-lg px-4" href="{% url 'bookings:booking_form' %}"><i class="fa-solid fa-calendar-check me-2"></i>Start a Reservation</a>
                    <a class="btn btn-outline-light btn-lg px-4" href="#meeting-room"><i class="fa-solid fa-photo-film me-2"></i>Explore Rooms</a>
                </div>
            </div>
        </div>
    </div>
    <div id="heroRoomCarousel" class="carousel slide hero-carousel" data-bs-ride="carousel" data-bs-interval="7000">
        <div class="carousel-inner">
            {% for slide in header_gallery %}
                <div class="carousel-item {% if forloop.first %}active{% endif %}">
                    <div class="hero-slide" style="background-image: url('{% static slide.image %}');"></div>
                    <div class="carousel-caption text-start">
                        <span class="badge rounded-pill bg-gold text-navy fw-semibold mb-2">From Rs. {{ slide.price|intcomma }} / night</span>
                        <h2 class="h3 fw-bold text-white">{{ slide.title }}</h2>
                        <p class="mb-0 text-white-50">{{ slide.subtitle }}</p>
                    </div>
                </div>
            {% endfor %}
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#heroRoomCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#heroRoomCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>
</section>

<section class="py-5 bg-light" id="occupancy">
    <div class="container">
        <div class="row justify-content-center text-center mb-4">
            <div class="col-lg-8">
                <h2 class="section-title">A residence for every style of stay</h2>
                <p class="text-muted">Track availability in real time and secure the ideal category — from intimate standard rooms to statement suites.</p>
            </div>
        </div>
        <div class="row g-4">
            <div class="col-md-4">
                <div class="info-card text-center shadow-sm h-100">
                    <div class="icon-wrapper bg-navy text-white mb-3"><i class="fa-solid fa-hotel"></i></div>
                    <h3 class="h5">Total Inventory</h3>
                    <p class="display-5 fw-bold text-navy mb-0">{{ total_rooms }}</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="info-card text-center shadow-sm h-100">
                    <div class="icon-wrapper bg-success text-white mb-3"><i class="fa-solid fa-door-open"></i></div>
                    <h3 class="h5">Ready for Check-in</h3>
                    <p class="display-5 fw-bold text-success mb-0">{{ available_rooms }}</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="info-card text-center shadow-sm h-100">
                    <div class="icon-wrapper bg-danger text-white mb-3"><i class="fa-solid fa-bed"></i></div>
                    <h3 class="h5">Currently Hosted</h3>
                    <p class="display-5 fw-bold text-danger mb-0">{{ booked_rooms }}</p>
                </div>
            </div>
        </div>
    </div>
</section>

{% for section in room_sections %}
    <section class="py-5 {% if forloop.counter|divisibleby:2 %}bg-light{% endif %}" id="{{ section.slug }}">
        <div class="container">
            <div class="row align-items-center g-4 {% if forloop.counter|divisibleby:2 %}flex-lg-row-reverse{% endif %}">
                <div class="col-lg-6">
                    {% if section.images|length > 1 %}
                        <div class="row g-3">
                            {% for image in section.images %}
                                <div class="col-6 col-sm-4">
                                    <div class="ratio ratio-4x3 rounded-4 overflow-hidden shadow-sm">
                                        <img src="{% static image %}" class="w-100 h-100 object-fit-cover" alt="{{ section.title }} image {{ forloop.counter }}">
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                    {% else %}
                        <div class="ratio ratio-4x3 rounded-4 overflow-hidden shadow-sm">
                            <img src="{% static section.images.0 %}" class="w-100 h-100 object-fit-cover" alt="{{ section.title }} image">
                        </div>
                    {% endif %}
                </div>
                <div class="col-lg-6">
                    <h3 class="h2 fw-semibold mb-3">{{ section.title }}</h3>
                    <p class="text-muted mb-4">{{ section.summary }}</p>
                    {% if section.price %}
                        <div class="d-inline-flex align-items-center px-3 py-2 rounded-pill bg-navy text-white fw-semibold shadow-sm mb-4">
                            <i class="fa-solid fa-tag me-2"></i>Rs. {{ section.price|intcomma }} per night
                        </div>
                    {% endif %}
                    <div class="d-flex flex-wrap gap-3">
                        <a class="btn btn-primary px-4" href="{% url 'bookings:booking_form' %}"><i class="fa-solid fa-calendar-plus me-2"></i>Book this category</a>
                        <a class="btn btn-outline-secondary px-4" href="#contact"><i class="fa-solid fa-comments me-2"></i>Speak to concierge</a>
                    </div>
                </div>
            </div>
        </div>
    </section>
{% endfor %}

<section class="py-5" id="exterior">
    <div class="container">
        <div class="row justify-content-center text-center mb-4">
            <div class="col-lg-8">
                <h2 class="section-title">Moments beyond the suite</h2>
                <p class="text-muted">Sunrise terraces, twinkling skyline vistas, and artfully landscaped courtyards — the HotelEase canvas is breathtaking at every hour.</p>
            </div>
        </div>
        <div class="row g-3">
            {% for image in exterior_gallery %}
                <div class="col-6 col-md-4 col-lg-2">
                    <div class="ratio ratio-4x3 rounded-4 overflow-hidden shadow-sm">
                        <img src="{% static image %}" class="w-100 h-100 object-fit-cover" alt="Exterior view {{ forloop.counter }}">
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
</section>

<section class="py-5 bg-light" id="contact">
    <div class="container">
        <div class="row g-4 align-items-start">
            <div class="col-lg-5">
                <h2 class="section-title">We curate every stay around you</h2>
                <ul class="list-unstyled text-muted mb-4">
                    <li class="mb-2"><i class="fa-solid fa-location-dot text-gold me-2"></i>{{ hotel.address }}</li>
                    <li class="mb-2"><i class="fa-solid fa-phone text-gold me-2"></i>{{ hotel.phone }}</li>
                    <li class="mb-2"><i class="fa-solid fa-envelope text-gold me-2"></i><a class="text-decoration-none text-navy fw-semibold" href="mailto:{{ hotel.email }}">{{ hotel.email }}</a></li>
                </ul>
                <div class="map-placeholder rounded-4 overflow-hidden shadow-sm">
                    <iframe title="HotelEase Location" src="https://maps.google.com/maps?q=Punjab%20University%20Employees%20Housing%20Society%20Phase%202%20Block%20A&t=&z=13&ie=UTF8&iwloc=&output=embed" loading="lazy"></iframe>
                </div>
            </div>
            <div class="col-lg-7">
                <div class="contact-card shadow-sm">
                    <h3 class="h4 fw-semibold mb-3">Plan your arrival</h3>
                    <form method="post" class="row g-3">
                        {% csrf_token %}
                        <div class="col-md-6">
                            {{ contact_form.name.label_tag }}
                            {{ contact_form.name }}
                            {% for error in contact_form.name.errors %}<div class="invalid-feedback d-block">{{ error }}</div>{% endfor %}
                        </div>
                        <div class="col-md-6">
                            {{ contact_form.email.label_tag }}
                            {{ contact_form.email }}
                            {% for error in contact_form.email.errors %}<div class="invalid-feedback d-block">{{ error }}</div>{% endfor %}
                        </div>
                        <div class="col-12">
                            {{ contact_form.subject.label_tag }}
                            {{ contact_form.subject }}
                            {% for error in contact_form.subject.errors %}<div class="invalid-feedback d-block">{{ error }}</div>{% endfor %}
                        </div>
                        <div class="col-12">
                            {{ contact_form.message.label_tag }}
                            {{ contact_form.message }}
                            {% for error in contact_form.message.errors %}<div class="invalid-feedback d-block">{{ error }}</div>{% endfor %}
                        </div>
                        <div class="col-12 d-flex justify-content-end">
                            <button type="submit" class="btn btn-gold btn-lg px-5">Send Message</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}
